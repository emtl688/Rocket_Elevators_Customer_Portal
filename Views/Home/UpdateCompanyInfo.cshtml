@{
    ViewData["Title"] = "Update Company Info";
}

<script src="~/js/jquery-3.5.1.min.js"></script>
<div class="text-center">
    <h1 class="display-4">Update Contact Info</h1>
    <p></p>
</div>

<script>
    function updateCustomer() {
        var data = {
            companyName: $('#company_name').val(),
            companyDescription: $('#description').val(),
            fullNameOfCompanyContact: $('#contact_name').val(),
            companyContactPhone: $('#contact_phone').val(),
            fullNameOfServiceTechnicalAuthority: $('#tech_name').val(),
            technicalAuthorityPhoneForService: $('#tech_phone').val(),
            technicalManagerEmailForService: $('#tech_mail').val()
        };

        $.ajax({
            url: 'https://rocketelevators-em.azurewebsites.net/api/Customers',
            type: 'PUT',
            data: JSON.stringify(data),
            headers: {
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Methods": "HEAD, GET, POST, PUT, PATCH, DELETE",
                "Access-Control-Allow-Headers": "Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            success: function (result) {
                alert('Successfully Updated Information');
                return false;
            }
        });

        return false;
    }
</script>

<form onsubmit="return updateCustomer();" id="customerForm">
    <div class="container">
        <div class="row">
            <div id="typeChoice" class="col-md-8 form-group">

                <script>
                    let customer = JSON.parse('@Html.Raw(Json.Serialize(ViewBag.customer))');
                </script>



                <label for="company_name">Company Name</label>
                <input required type="text" value="@ViewBag.customer.CompanyName" class="form-control" name="company_name" id="company_name" readonly disabled>
                <br />

                
                <label for="description">Company Description</label>
                <input required type="text" value="@ViewBag.customer.CompanyDescription" class="form-control" name="description" id="description">
                <br />


                <label for="contact_name">Full Name Of Company Contact</label>
                <input required type="text" value="@ViewBag.customer.FullNameOfCompanyContact" class="form-control" name="contact_name" id="contact_name">
                <br />


                <label for="contact_phone">Company Contact Phone Number</label>
                <input required type="text" value="@ViewBag.customer.CompanyContactPhone" class="form-control" name="contact_phone" id="contact_phone">
                <br />


                <label for="tech_name">Full Name Of Technical/Service Contact</label>
                <input required type="text" value="@ViewBag.customer.FullNameOfServiceTechnicalAuthority" class="form-control" name="tech_name" id="tech_name">
                <br />


                <label for="tech_phone">Technical/Service Phone Number</label>
                <input required type="text" value="@ViewBag.customer.TechnicalAuthorityPhoneForService" class="form-control" name="tech_phone" id="tech_phone">
                <br />


                <label for="tech_mail">Technical/Service Email</label>
                <input required type="text" value="@ViewBag.customer.TechnicalManagerEmailForService" class="form-control" name="tech_mail" id="tech_mail">
                <br />

                <div class="row">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary" id="btnUpdateInfo"><i class="fa fa-check"></i> UPDATE INFO </button>
                        <br /><br />
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
