@{
    ViewData["Title"] = "Update Company Info";
}

<script src="~/js/jquery-3.5.1.min.js"></script>
<div class="text-center">
    <h1 class="display-4">Update Company Info</h1>
    <p></p>
</div>
<script>
    function updateCustomer() {
        var data = {
            CompanyName: $('#company_name').val(),
            FullNameOfCompanyContact: $('#cpy_contact_name').val(),
            CompanyContactPhone: $('#cpy_contact_phone').val(),
            FullNameOfServiceTechnicalAuthority: $('#sta_name').val(),
            TechnicalAuthorityPhoneForService: $('#sta_phone').val(),
            TechnicalManagerEmailForService: $('#sta_mail').val(),
            CompanyDescription: $('#cpy_description').val(),
            EmailOfCompanyContact: $('#cpy_contact_email').val()
        };

        $.ajax({
            url: 'https://rocketelevators-em.azurewebsites.net/api/Customers',
            type: 'PUT',
            data: JSON.stringify(data),
            headers: {
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Methods": "HEAD, GET, POST, PUT, PATCH, DELETE",
                "Access-Control-Allow-Headers": "Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            success: function (result) {
                alert('Customer updated successfully!');
                return false;
            }
        });

        return false;
    }
</script>

<form action="" onsubmit="return updateCustomer();" id="customerForm">
    <div id="quote_form" class="container">
        <div class="row">
            <div id="typeChoice" class="col-md-12 form-group">

                <script>
                    let customer = JSON.parse('@Html.Raw(Json.Serialize(ViewBag.customer))');
                </script>



                <label for="company_name">Company Name</label>
                <input required type="text" value="@ViewBag.customer.CompanyName" class="form-control" name="company_name" id="company_name">
                <br />

                
                <label for="cpy_description">Company Description</label>
                <input required type="text" value="@ViewBag.customer.CompanyDescription" class="form-control" name="cpy_description" id="cpy_description">
                <br />


                <label for="cpy_contact_name">Full Name Of Company Contact</label>
                <input required type="text" value="@ViewBag.customer.FullNameOfCompanyContact" class="form-control" name="cpy_contact_name" id="cpy_contact_name">
                <br />


                <label for="cpy_contact_phone">Company Contact Phone Number</label>
                <input required type="text" value="@ViewBag.customer.CompanyContactPhone" class="form-control" name="cpy_contact_phone" id="cpy_contact_phone">
                <br />


                <label for="sta_name">Full Name Of Technical/Service Contact</label>
                <input required type="text" value="@ViewBag.customer.FullNameOfServiceTechnicalAuthority" class="form-control" name="sta_name" id="sta_name">
                <br />


                <label for="sta_phone">Technical/Service Phone Number</label>
                <input required type="text" value="@ViewBag.customer.TechnicalAuthorityPhoneForService" class="form-control" name="sta_phone" id="sta_phone">
                <br />


                <label for="sta_mail">Technical/Service Email</label>
                <input required type="text" value="@ViewBag.customer.TechnicalManagerEmailForService" class="form-control" name="sta_mail" id="sta_mail">
                <br />

                <div class="row">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary" id="btnUpdateInfo"><i class="fa fa-check"></i> UPDATE INFO </button>
                        <br /><br />
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
